---
title: Node.js API reference
author: Victor Teo
orderHint: 2
---

# Node.js API reference

## `App`

The `App` class represents a Teo server app.

### constructor

Create an app.

#### Examples

##### Create an app

```ts showLineNumbers
const app = new App()
```

### `mainNamespace`

Retrieve the main namespace from the app. Namespace is where models, handlers, 
decorators and pipeline items are defined. See [`Namespace`](#namespace).

#### Examples

##### Retrieve the main namespace

```ts showLineNumbers
const mainNamespace = app.mainNamespace()
```

### `setup`

Attach some code to run after the database is connected. The parameter `Teo` 
is in generated entities.

#### Examples

##### Run custom setup code

```ts showLineNumbers
app.setup(async (teo: Teo) => {
    await teo.transaction(async (teo: Teo) => {
      // perform something within this transaction
    })
})
```

### `program`

Define a custom program to run with Teo CLI. The parameter `Teo` is in 
generated entities.

#### Examples

##### Define a custom program

```ts showLineNumbers
app.program("mycode", async (teo: Teo) => {
    // do something with the data...
})
```

### `run`

Start the Teo server app.

#### Example

##### Run an server app

```ts showLineNumbers
await app.run()
```

## `Namespace`

Namespace is where things are defined and organized.

### `isMain`

Whether the namespace is the main namespace.

### `isStd`

Whether the namespace is the builtin standard namespace.

### `path`

Get the namespace's path.

#### Example

#### Namespace's path

```ts showLineNumbers
const namespacePath: string[] = namespace.path()
```

### `namespace`

Get the namespace's child namespace by `name` or `None`.

### `namespaceOrCreate`

Get the namespace's child namespace by `name`. If not present, create and 
return.

### `namespaceAtPath`

Get the namespace's child namespace at path.

### `namespaceOrCreateAtPath`

The the namespace's child namespace at path. If not present, create and return.

### `defineModelDecorator`

Define a new model decorator on a namespace.

#### Example

##### Define a custom model decorator

```ts showLineNumbers
app.mainNamespace().defineModelDecorator("myModelDecorator", (model) => {
    model.setData("myData", "myValue")
})
```

### `defineModelFieldDecorator`

Define a new model field decorator on a namespace.

#### Example

##### Define a custom model field decorator

```python showLineNumbers
app.mainNamespace().defineModelFieldDecorator("myModelFieldDecorator", (field) => {
    field.setData("myData", "myValue")
})
```

### `defineModelRelationDecorator`

Define a new model relation decorator on a namespace.

#### Example

##### Define a custom model relation decorator

```python showLineNumbers
app.mainNamespace().defineModelRelationDecorator("myModelRelationDecorator", (relation) => {
    relation.setData("myData", "myValue")
})
```

### `defineModelPropertyDecorator`

Define a new model property decorator on a namespace.

#### Example

##### Define a custom model property decorator

```python showLineNumbers
app.mainNamespace().defineModelPropertyDecorator("myModelPropertyDecorator", (property) => {
    property.setData("myData", "myValue")
})
```

### `definePipelineItem`

Define a custom pipeline item on a namespace.

#### Example

##### Define a custom pipeline item

```ts showLineNumbers
app.mainNamespace().definePipelineItem("replaceComWithIo", async (input: string) => {
    return input.replace(/com$/, 'io')
})
```

### `defineTransformPipelineItem`

Define a transformer pipeline item. This is a shortcut to 
`define_pipeline_item`.

#### Example

##### Define a custom transformer

```ts showLineNumbers
app.mainNamespace().defineTransformPipelineItem("addOne", (i: number) => i + 1)
```

### `validate`

Register a custom validate function.

#### Examples

##### Register a validate function with bool return value

```ts showLineNumbers
app.validate("largerThan15", (i: number) => i > 15);
```

##### Register a validator function with string value

```ts showLineNumbers
app.validate("largerThan15", (i: number) => {
  if (i <= 15) {
    return "value should be larger than 15"
  }
});
```

### `callback`

Register a custom callback function.

##### Register a callback function

```ts showLineNumbers
app.callback("callback", async (user: User) => {
    // do anything
});
```

### `compare`

Register a custom compare function.


## Entity

API documentation for generated model entities.

### `findMany`

Find many objects with params same as `findMany` handler.

#### Signature

```ts
async function findMany(finder?: FindManyArgs): This[]
```

#### Arguments

| Name   | Required | Type         | Description |
| :----- | :------- | :----------- | :---------- |
| finder | No       | FindManyArgs | The finder  |

#### Examples

##### Find all users

```ts showLineNumbers
const users = await User.findMany()
```

##### Find users filtered by `name`

```ts showLineNumbers
const users = await User.findMany({
  where: {
    name: 'John'
  }
})
```

##### Find users ordered by `createdAt`

```ts showLineNumbers
const users = await User.findMany({
  orderBy: {
    createdAt: 'desc'
  }
})
```

##### Find users with posts

```ts showLineNumbers
const users = await User.findMany({
  include: {
    posts: true
  }
})
```

### `findUnique`

Find a unique object with params same as `findUnique` handler.

#### Signature

```ts
async function findUnique(finder?: FindUniqueArgs): This?
```

#### Arguments

| Name   | Required | Type   | Description |
| :----- | :------- | :----- | :---------- |
| finder | No       | FindUniqueArgs | The finder  |

#### Examples

##### Find a unique user

```ts showLineNumbers
const user = await User.findUnique({
  where: {
    id: 1
  }
})
```

### `findFirst`

Find an object with params same as `findFirst` handler.

#### Signature

```ts
async function findFirst(finder?: FindManyArgs): This?
```

#### Arguments

| Name   | Required | Type   | Description |
| :----- | :------- | :----- | :---------- |
| finder | No       | FindManyArgs | The finder  |

#### Examples

##### Find a user

```ts showLineNumbers
const user = await User.findFirst({
  where: {
    age: 20
  }
})
```

### `create`

Create a new entity.

#### Signature

```ts
static async function create(input?: CreateArgs): This
```

#### Arguments

| Name  | Required | Type       | Description     |
| :---- | :------- | :--------- | :-------------- |
| input | No       | CreateArgs | The create data |

#### Examples

##### Create a new Post

```ts showLineNumbers
const post = await Post.create({ title: "Post 1" })
```

### `isNew`

Returns true if object is new.

#### Examples

##### Check whether a post is new

```ts showLineNumbers
const isNew = post.isNew
```

### `isModified`

Returns true if object is modified.

#### Examples

##### Check if a post is modified

```ts showLineNumbers
const isModified = post.isModified
```

### `set`

Set values to an object. `onSet` pipelines are triggered.

#### Signature

```ts
async function set(values?: UpdateInput): void
```

#### Arguments

| Name   | Required | Type             | Description  |
| :----- | :------- | :--------------- | :----------- |
| values | No       | impl UpdateInput | The set data |

#### Examples

##### Set values to a user

```ts showLineNumbers
await user.set({ "name": "Peter", "age": 15 })
```

### `update`

Update values on an object.

#### Signature

```ts
async function update(values?: ScalarUpdateInput): void
```

#### Arguments

| Name   | Required | Type                   | Description     |
| :----- | :------- | :--------------------- | :-------------- |
| values | No       | impl ScalarUpdateInput | The update data |

#### Examples

##### Update values on a user

```ts showLineNumbers
await user.update({ "name": "Peter", "age": 15 })
```

### `save`

Save an object.

#### Signature

```ts
async function save(): void
```

#### Examples

##### Save a post

```ts showLineNumbers
await post.save()
```

### `delete`

Delete an object.

#### Signature

```ts
async function delete(): void
```

#### Examples

##### Delete a post

```ts showLineNumbers
await post.delete()
```
